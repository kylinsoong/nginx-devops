= API Gateway
:toc: manual

== server 和 listen 指令

=== listen 指令分别监听端口、IP、及IP:端口的差异

[source, bash]
.*NGINX Configuration*
----
server {
    listen    9001;
}

server {
    listen    10.1.10.195:9001;
}

server {
    listen    10.1.10.195;
}
----

[source, bash]
.*NGINX Listen list*
----
# netstat -antulop | grep nginx
tcp        0      0 0.0.0.0:9001            0.0.0.0:*               LISTEN      1719/nginx: master   off (0.00/0/0)
tcp        0      0 10.1.10.195:80          0.0.0.0:*               LISTEN      1719/nginx: master   off (0.00/0/0)
----

*Conclusion*

|===
|Configuration |Listen

|listen 9001
|0.0.0.0:9001

|listen 10.1.10.195:9001
|10.1.10.195:9001

|listen 10.1.10.195
|10.1.10.195:80
|===

NOTE: If both `listen 9001` and `listen 10.1.10.195:9001` exist, the NGINX listen on `0.0.0.0:9001`.
